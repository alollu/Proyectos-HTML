<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Maximiza tu productividad</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-purple-50 min-h-screen flex flex-col items-center justify-center p-4 text-gray-800">
  <!-- Encabezado -->
  <div class="text-center">
    <h1 class="text-4xl font-bold mb-4 flex items-center justify-center gap-3">
      <span class="text-5xl">üå∏</span> Maximiza tu productividad
    </h1>
    <p class="max-w-xl text-lg mb-6">
      Divide tu tiempo en intervalos de trabajo seguidos de descansos y mejora el enfoque de tus ciclos.
      ¬°Personaliza los tiempos si lo deseas!
    </p>
  </div>

  <!-- Tarjeta principal -->
  <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-md text-center">
    <!-- Inputs de tiempo -->
    <div class="flex flex-col sm:flex-row justify-center gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">Min. trabajo</label>
        <input id="inputWork" type="number" min="1" value="30" class="w-24 p-2 border rounded-lg text-center">
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Min. descanso</label>
        <input id="inputBreak" type="number" min="1" value="5" class="w-24 p-2 border rounded-lg text-center">
      </div>
    </div>

    <!-- Display temporizador y progreso -->
    <div id="timer" class="text-6xl font-bold mb-4">50:00</div>
    <div class="w-full h-4 bg-purple-100 rounded-full mb-4 overflow-hidden">
      <div id="progressBar" class="h-full bg-purple-600 w-0 transition-all duration-1000"></div>
    </div>

    <!-- Botones -->
    <div class="flex justify-center gap-4 mb-4">
      <button id="btnStart" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl">Iniciar</button>
      <button id="btnPause" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-xl">Pausar</button>
      <button id="btnReset" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl">Reiniciar</button>
    </div>

    <!-- Estado y sugerencias -->
    <p id="status" class="text-lg mb-2 font-semibold">Modo: Trabajo</p>
    <p id="suggestion" class="italic text-sm text-gray-600">Conc√©ntrate en tu tarea üìö</p>
    <p class="mt-4 text-md font-medium">Pomodoros completados: <span id="pomodoros">0</span></p>
  </div>

  <!-- Sonido -->
  <audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

  <!-- Cr√©ditos -->
  <footer class="mt-6 text-xs text-gray-500 italic font-light">
    created by S. Caprioli
  </footer>

  <!-- ================== L√ìGICA ================== -->
  <script>
    /* ------------------ Variables globales ------------------ */
    let timer = null;           // ID del setInterval
    let isWorkTime = true;      // true = modo trabajo | false = modo descanso
    let totalSeconds = 30 * 60; // segundos totales del intervalo actual
    let timeLeft = totalSeconds;
    let pomodoros = 0;

    /* ------------------ Nodos del DOM ------------------ */
    const inputWork   = document.getElementById("inputWork");
    const inputBreak  = document.getElementById("inputBreak");
    const timerDisplay = document.getElementById("timer");
    const statusText   = document.getElementById("status");
    const suggestion   = document.getElementById("suggestion");
    const pomodorosCount = document.getElementById("pomodoros");
    const progressBar  = document.getElementById("progressBar");
    const alarm        = document.getElementById("alarmSound");

    const btnStart = document.getElementById("btnStart");
    const btnPause = document.getElementById("btnPause");
    const btnReset = document.getElementById("btnReset");

    /* ------------------ Sugerencias para el descanso ------------------ */
    const breakSuggestions = [
      "Haz estiramientos üßò‚Äç‚ôÄÔ∏è",
      "Bebe agua üíß",
      "Da un paseo corto üö∂‚Äç‚ôÇÔ∏è",
      "T√≥mate una infusi√≥n üçµ",
      "Haz unas sentadillas üèãÔ∏è‚Äç‚ôÄÔ∏è"
    ];

    /* ------------------ Utilidades ------------------ */
    function updateDisplay() {
      const minutes = Math.floor(timeLeft / 60).toString().padStart(2, "0");
      const seconds = (timeLeft % 60).toString().padStart(2, "0");
      timerDisplay.textContent = `${minutes}:${seconds}`;
      // Barra de progreso 0-100 %
      const progress = 100 - (timeLeft / totalSeconds) * 100;
      progressBar.style.width = `${progress}%`;
    }

    function playAlarm() {
      alarm.currentTime = 0;
      alarm.play();
    }

    /* ------------------ Control del temporizador ------------------ */
    function startTimer() {
      if (timer) return; // ya est√° corriendo

      // Si est√° en 0, reinicialo con los valores actuales
      if (timeLeft <= 0) {
        totalSeconds = (isWorkTime ? parseInt(inputWork.value) : parseInt(inputBreak.value)) * 60;
        timeLeft = totalSeconds;
      }

      timer = setInterval(() => {
        timeLeft--;
        updateDisplay();

        if (timeLeft <= 0) {
          clearInterval(timer);
          timer = null;
          playAlarm();

          if (isWorkTime) {
            // Trabajo ‚Üí Descanso
            pomodoros++;
            pomodorosCount.textContent = pomodoros;
            isWorkTime = false;
            statusText.textContent = "Modo: Descanso";
            suggestion.textContent = breakSuggestions[Math.floor(Math.random() * breakSuggestions.length)];
          } else {
            // Descanso ‚Üí Trabajo
            isWorkTime = true;
            statusText.textContent = "Modo: Trabajo";
            suggestion.textContent = "Conc√©ntrate en tu tarea üìö";
          }

          // Preparar siguiente intervalo y comenzarlo autom√°ticamente
          totalSeconds = (isWorkTime ? parseInt(inputWork.value) : parseInt(inputBreak.value)) * 60;
          timeLeft = totalSeconds;
          updateDisplay();
          startTimer();
        }
      }, 1000);
    }

    function pauseTimer() {
      clearInterval(timer);
      timer = null;
    }

    function resetTimer() {
      pauseTimer();
      isWorkTime = true;
      totalSeconds = parseInt(inputWork.value) * 60;
      timeLeft = totalSeconds;
      progressBar.style.width = "0%";
      statusText.textContent = "Modo: Trabajo";
      suggestion.textContent = "Conc√©ntrate en tu tarea üìö";
      updateDisplay();
    }

    /* ------------------ Listeners ------------------ */
    btnStart.addEventListener("click", startTimer);
    btnPause.addEventListener("click", pauseTimer);
    btnReset.addEventListener("click", resetTimer);

    // Actualizar pantalla inicial
    updateDisplay();
  </script>
</body>
</html>
